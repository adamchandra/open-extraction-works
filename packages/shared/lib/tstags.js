function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

/**
 * Some helper functions for working with client-side html
 */
import _ from "lodash";
import $ from "jquery";
import { zipWithIndex } from "./LodashPlus";
export function $id(selector) {
  return $(`#${selector}`);
}
export function mkNbsp(n) {
  const nx = n || 1;

  const nbsps = _.times(nx, _.constant("\u00A0"));

  return document.createTextNode(_.join(nbsps, ""));
}

class JQNodeCtors {
  constructor() {
    _defineProperty(this, "nbsp", mkNbsp);

    _defineProperty(this, "a", nodeCtr("a"));

    _defineProperty(this, "abbr", nodeCtr("abbr"));

    _defineProperty(this, "acronym", nodeCtr("acronym"));

    _defineProperty(this, "address", nodeCtr("address"));

    _defineProperty(this, "applet", nodeCtr("applet"));

    _defineProperty(this, "area", nodeCtr("area"));

    _defineProperty(this, "article", nodeCtr("article"));

    _defineProperty(this, "aside", nodeCtr("aside"));

    _defineProperty(this, "audio", nodeCtr("audio"));

    _defineProperty(this, "b", nodeCtr("b"));

    _defineProperty(this, "base", nodeCtr("base"));

    _defineProperty(this, "basefont", nodeCtr("basefont"));

    _defineProperty(this, "bdi", nodeCtr("bdi"));

    _defineProperty(this, "bdo", nodeCtr("bdo"));

    _defineProperty(this, "big", nodeCtr("big"));

    _defineProperty(this, "blockquote", nodeCtr("blockquote"));

    _defineProperty(this, "body", nodeCtr("body"));

    _defineProperty(this, "br", nodeCtr("br"));

    _defineProperty(this, "button", nodeCtr("button"));

    _defineProperty(this, "canvas", nodeCtr("canvas"));

    _defineProperty(this, "caption", nodeCtr("caption"));

    _defineProperty(this, "center", nodeCtr("center"));

    _defineProperty(this, "cite", nodeCtr("cite"));

    _defineProperty(this, "code", nodeCtr("code"));

    _defineProperty(this, "col", nodeCtr("col"));

    _defineProperty(this, "colgroup", nodeCtr("colgroup"));

    _defineProperty(this, "data", nodeCtr("data"));

    _defineProperty(this, "datalist", nodeCtr("datalist"));

    _defineProperty(this, "dd", nodeCtr("dd"));

    _defineProperty(this, "del", nodeCtr("del"));

    _defineProperty(this, "details", nodeCtr("details"));

    _defineProperty(this, "dfn", nodeCtr("dfn"));

    _defineProperty(this, "dialog", nodeCtr("dialog"));

    _defineProperty(this, "dir", nodeCtr("dir"));

    _defineProperty(this, "div", nodeCtr("div"));

    _defineProperty(this, "dl", nodeCtr("dl"));

    _defineProperty(this, "dt", nodeCtr("dt"));

    _defineProperty(this, "em", nodeCtr("em"));

    _defineProperty(this, "embed", nodeCtr("embed"));

    _defineProperty(this, "fieldset", nodeCtr("fieldset"));

    _defineProperty(this, "figcaption", nodeCtr("figcaption"));

    _defineProperty(this, "figure", nodeCtr("figure"));

    _defineProperty(this, "font", nodeCtr("font"));

    _defineProperty(this, "footer", nodeCtr("footer"));

    _defineProperty(this, "form", nodeCtr("form"));

    _defineProperty(this, "frame", nodeCtr("frame"));

    _defineProperty(this, "frameset", nodeCtr("frameset"));

    _defineProperty(this, "h1", nodeCtr("h1"));

    _defineProperty(this, "h2", nodeCtr("h2"));

    _defineProperty(this, "h3", nodeCtr("h3"));

    _defineProperty(this, "h4", nodeCtr("h4"));

    _defineProperty(this, "h5", nodeCtr("h5"));

    _defineProperty(this, "h6", nodeCtr("h6"));

    _defineProperty(this, "head", nodeCtr("head"));

    _defineProperty(this, "header", nodeCtr("header"));

    _defineProperty(this, "hr", nodeCtr("hr"));

    _defineProperty(this, "html", nodeCtr("html"));

    _defineProperty(this, "i", nodeCtr("i"));

    _defineProperty(this, "iframe", nodeCtr("iframe"));

    _defineProperty(this, "img", nodeCtr("img"));

    _defineProperty(this, "input", nodeCtr("input"));

    _defineProperty(this, "ins", nodeCtr("ins"));

    _defineProperty(this, "kbd", nodeCtr("kbd"));

    _defineProperty(this, "label", nodeCtr("label"));

    _defineProperty(this, "legend", nodeCtr("legend"));

    _defineProperty(this, "li", nodeCtr("li"));

    _defineProperty(this, "link", nodeCtr("link"));

    _defineProperty(this, "main", nodeCtr("main"));

    _defineProperty(this, "map", nodeCtr("map"));

    _defineProperty(this, "mark", nodeCtr("mark"));

    _defineProperty(this, "menu", nodeCtr("menu"));

    _defineProperty(this, "menuitem", nodeCtr("menuitem"));

    _defineProperty(this, "meta", nodeCtr("meta"));

    _defineProperty(this, "meter", nodeCtr("meter"));

    _defineProperty(this, "nav", nodeCtr("nav"));

    _defineProperty(this, "noframes", nodeCtr("noframes"));

    _defineProperty(this, "noscript", nodeCtr("noscript"));

    _defineProperty(this, "ol", nodeCtr("ol"));

    _defineProperty(this, "optgroup", nodeCtr("optgroup"));

    _defineProperty(this, "option", nodeCtr("option"));

    _defineProperty(this, "output", nodeCtr("output"));

    _defineProperty(this, "p", nodeCtr("p"));

    _defineProperty(this, "param", nodeCtr("param"));

    _defineProperty(this, "picture", nodeCtr("picture"));

    _defineProperty(this, "pre", nodeCtr("pre"));

    _defineProperty(this, "progress", nodeCtr("progress"));

    _defineProperty(this, "q", nodeCtr("q"));

    _defineProperty(this, "rp", nodeCtr("rp"));

    _defineProperty(this, "rt", nodeCtr("rt"));

    _defineProperty(this, "ruby", nodeCtr("ruby"));

    _defineProperty(this, "s", nodeCtr("s"));

    _defineProperty(this, "samp", nodeCtr("samp"));

    _defineProperty(this, "script", nodeCtr("script"));

    _defineProperty(this, "section", nodeCtr("section"));

    _defineProperty(this, "select", nodeCtr("select"));

    _defineProperty(this, "small", nodeCtr("small"));

    _defineProperty(this, "source", nodeCtr("source"));

    _defineProperty(this, "span", nodeCtr("span"));

    _defineProperty(this, "strike", nodeCtr("strike"));

    _defineProperty(this, "strong", nodeCtr("strong"));

    _defineProperty(this, "style", nodeCtr("style"));

    _defineProperty(this, "sub", nodeCtr("sub"));

    _defineProperty(this, "summary", nodeCtr("summary"));

    _defineProperty(this, "sup", nodeCtr("sup"));

    _defineProperty(this, "table", nodeCtr("table"));

    _defineProperty(this, "tbody", nodeCtr("tbody"));

    _defineProperty(this, "td", nodeCtr("td"));

    _defineProperty(this, "textarea", nodeCtr("textarea"));

    _defineProperty(this, "tfoot", nodeCtr("tfoot"));

    _defineProperty(this, "th", nodeCtr("th"));

    _defineProperty(this, "thead", nodeCtr("thead"));

    _defineProperty(this, "time", nodeCtr("time"));

    _defineProperty(this, "title", nodeCtr("title"));

    _defineProperty(this, "tr", nodeCtr("tr"));

    _defineProperty(this, "track", nodeCtr("track"));

    _defineProperty(this, "tt", nodeCtr("tt"));

    _defineProperty(this, "u", nodeCtr("u"));

    _defineProperty(this, "ul", nodeCtr("ul"));

    _defineProperty(this, "video", nodeCtr("video"));

    _defineProperty(this, "wbr", nodeCtr("wbr"));
  }

}

export const t = new JQNodeCtors();

const i = (...args) => elem("i", ...args);

const fa = icn => i(".fa", `.fa-${icn}`, {
  "aria-hidden": true
});

export const icon = {
  fa,
  trash: fa("trash"),
  hashtag: fa("hashtag"),
  chevronRight: fa("chevron-right"),
  chevronLeft: fa("chevron-left")
};

function nodeCtr(tag) {
  return (...args) => elem(tag, ...args);
}

function elem(tag, ...args) {
  const $tag = $(`<${tag}></${tag}>`);

  _.each(args, arg => {
    if (typeof arg === "string") {
      const re = /^[\\.#:@=]/;

      if (re.test(arg)) {
        arg.split(/ +/).forEach(attr => {
          if (_.startsWith(attr, ".")) {
            $tag.addClass(attr.slice(1));
          } else if (_.startsWith(attr, "#")) {
            $tag.attr("id", attr.slice(1));
          } else if (_.startsWith(attr, ":")) {
            $tag.attr("type", attr.slice(1));
          } else if (_.startsWith(attr, "@")) {
            $tag.attr("name", attr.slice(1));
          } else if (_.startsWith(attr, "=")) {
            $tag.attr("value", attr.slice(1));
          } else {
            throw new Error(`unexpected attribute type: ${attr}`);
          }
        });
      } else {
        $tag.text(arg);
      }
    } else if (typeof arg === "object") {
      if (arg instanceof $) {
        $tag.append(arg);
      } else if (Array.isArray(arg)) {
        _.each(arg, a0 => {
          $tag.append(a0);
        });
      } else {
        _.each(_.toPairs(arg), ([k, v]) => {
          $tag.attr(k, v);
        });
      }
    } else {
      throw new Error(`unexpected elem initializer: ${arg}`);
    }
  });

  return $tag;
}

export function makeModal(form) {
  const modal = t.div(".modal", ".fade", {
    tabindex: "-1",
    role: "dialog",
    "aria-hidden": true
  }, [t.div(".modal-dialog", {
    role: "document"
  }, [t.div(".modal-content", [t.div(".modal-body", [form])])])]);
  return modal;
}
export const htm = {
  labeledTextInput: (label, key) => {
    return t.span([t.input(":text", `@${key}`, `#${key}`), t.label({
      for: `$key`
    }, label)]);
  },
  labeledTextboxInput: (label, key) => {
    return t.span([t.textarea(":textarea", `@${key}`, `#${key}`), t.label({
      for: `$key`
    }, label)]);
  },
  labeledFileInput: (label, key) => {
    return t.div([t.input(":file", `@${key}`, `#${key}`), t.label({
      for: `$key`
    }, label)]);
  },
  iconButton: iconName => {
    return t.button(".btn-icon", [icon.fa(iconName)]);
  },

  makeRadios(name, values) {
    const radios = _.flatMap(zipWithIndex(values), ([[val, vicon, initCheck, tooltip, callback], vi]) => {
      const id = `${name}-choice-${vi}`;
      const btn = t.input({
        name,
        id,
        type: "radio",
        value: val
      });

      if (initCheck) {
        $(btn).attr("checked", initCheck);
        $(btn).prop("checked", initCheck);
      }

      $(btn).on("change", function () {
        // console.log("changing toolset", callback);
        if ($(this).is(":checked")) {
          callback();
        }
      });
      const label = t.label({
        for: id,
        title: tooltip
      }, [icon.fa(vicon)]);
      return [btn, label];
    });

    const form = t.form(".inline", [t.span(".radio-switch", [radios])]);
    return form;
  },

  makeToggle(name, checkedIcon, uncheckedIcon, initCheck, tooltip) {
    const id = "my-toggle";
    const input = t.input({
      name,
      id,
      type: "checkbox"
    });

    if (initCheck) {
      $(input).attr("checked", initCheck.toString());
      $(input).prop("checked", initCheck.toString());
    }

    const labelOn = t.label(".checked", {
      for: id,
      title: tooltip
    }, [icon.fa(checkedIcon)]);
    const labelOff = t.label(".unchecked", {
      for: id,
      title: tooltip
    }, [icon.fa(uncheckedIcon)]);
    const form = t.form(".inline", [t.span(".toggle-switch", [input, labelOn, labelOff])]);
    return form;
  }

};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy90c3RhZ3MudHMiXSwibmFtZXMiOlsiXyIsIiQiLCJ6aXBXaXRoSW5kZXgiLCIkaWQiLCJzZWxlY3RvciIsIm1rTmJzcCIsIm4iLCJueCIsIm5ic3BzIiwidGltZXMiLCJjb25zdGFudCIsImRvY3VtZW50IiwiY3JlYXRlVGV4dE5vZGUiLCJqb2luIiwiSlFOb2RlQ3RvcnMiLCJub2RlQ3RyIiwidCIsImkiLCJhcmdzIiwiZWxlbSIsImZhIiwiaWNuIiwiaWNvbiIsInRyYXNoIiwiaGFzaHRhZyIsImNoZXZyb25SaWdodCIsImNoZXZyb25MZWZ0IiwidGFnIiwiJHRhZyIsImVhY2giLCJhcmciLCJyZSIsInRlc3QiLCJzcGxpdCIsImZvckVhY2giLCJhdHRyIiwic3RhcnRzV2l0aCIsImFkZENsYXNzIiwic2xpY2UiLCJFcnJvciIsInRleHQiLCJhcHBlbmQiLCJBcnJheSIsImlzQXJyYXkiLCJhMCIsInRvUGFpcnMiLCJrIiwidiIsIm1ha2VNb2RhbCIsImZvcm0iLCJtb2RhbCIsImRpdiIsInRhYmluZGV4Iiwicm9sZSIsImh0bSIsImxhYmVsZWRUZXh0SW5wdXQiLCJsYWJlbCIsImtleSIsInNwYW4iLCJpbnB1dCIsImZvciIsImxhYmVsZWRUZXh0Ym94SW5wdXQiLCJ0ZXh0YXJlYSIsImxhYmVsZWRGaWxlSW5wdXQiLCJpY29uQnV0dG9uIiwiaWNvbk5hbWUiLCJidXR0b24iLCJtYWtlUmFkaW9zIiwibmFtZSIsInZhbHVlcyIsInJhZGlvcyIsImZsYXRNYXAiLCJ2YWwiLCJ2aWNvbiIsImluaXRDaGVjayIsInRvb2x0aXAiLCJjYWxsYmFjayIsInZpIiwiaWQiLCJidG4iLCJ0eXBlIiwidmFsdWUiLCJwcm9wIiwib24iLCJpcyIsInRpdGxlIiwibWFrZVRvZ2dsZSIsImNoZWNrZWRJY29uIiwidW5jaGVja2VkSWNvbiIsInRvU3RyaW5nIiwibGFiZWxPbiIsImxhYmVsT2ZmIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7QUFJQSxPQUFPQSxD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QUFTeEIsSUFBVCxDQUFjLFNBQWQsRUFBeUJ1QyxTQUFTLENBQUNlLFFBQVYsRUFBekI7QUFDQXhGLE1BQUFBLENBQUMsQ0FBQzBELEtBQUQsQ0FBRCxDQUFTdUIsSUFBVCxDQUFjLFNBQWQsRUFBeUJSLFNBQVMsQ0FBQ2UsUUFBVixFQUF6QjtBQUNEOztBQUVELFVBQU1DLE9BQU8sR0FBRzFFLENBQUMsQ0FBQ3dDLEtBQUYsQ0FDZCxVQURjLEVBRWQ7QUFDRUksTUFBQUEsR0FBRyxFQUFFa0IsRUFEUDtBQUVFTyxNQUFBQSxLQUFLLEVBQUVWO0FBRlQsS0FGYyxFQU1kLENBQUNyRCxJQUFJLENBQUNGLEVBQUwsQ0FBUW1FLFdBQVIsQ0FBRCxDQU5jLENBQWhCO0FBU0EsVUFBTUksUUFBUSxHQUFHM0UsQ0FBQyxDQUFDd0MsS0FBRixDQUNmLFlBRGUsRUFFZjtBQUNFSSxNQUFBQSxHQUFHLEVBQUVrQixFQURQO0FBRUVPLE1BQUFBLEtBQUssRUFBRVY7QUFGVCxLQUZlLEVBTWYsQ0FBQ3JELElBQUksQ0FBQ0YsRUFBTCxDQUFRb0UsYUFBUixDQUFELENBTmUsQ0FBakI7QUFTQSxVQUFNdkMsSUFBSSxHQUFHakMsQ0FBQyxDQUFDaUMsSUFBRixDQUFPLFNBQVAsRUFBa0IsQ0FDN0JqQyxDQUFDLENBQUMwQyxJQUFGLENBQU8sZ0JBQVAsRUFBeUIsQ0FBQ0MsS0FBRCxFQUFRK0IsT0FBUixFQUFpQkMsUUFBakIsQ0FBekIsQ0FENkIsQ0FBbEIsQ0FBYjtBQUdBLFdBQU8xQyxJQUFQO0FBQ0Q7O0FBMUdnQixDQUFaIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBTb21lIGhlbHBlciBmdW5jdGlvbnMgZm9yIHdvcmtpbmcgd2l0aCBjbGllbnQtc2lkZSBodG1sXG4gKi9cblxuaW1wb3J0IF8gZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0ICQgZnJvbSBcImpxdWVyeVwiO1xuXG5pbXBvcnQge3ppcFdpdGhJbmRleH0gZnJvbSBcIi4vTG9kYXNoUGx1c1wiO1xuXG50eXBlIEpRQXJncyA9IHN0cmluZyB8IG9iamVjdDtcblxuZXhwb3J0IGZ1bmN0aW9uICRpZChzZWxlY3Rvcjogc3RyaW5nKSB7XG4gIHJldHVybiAkKGAjJHtzZWxlY3Rvcn1gKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1rTmJzcChuOiBudW1iZXIpOiBUZXh0IHtcbiAgY29uc3QgbnggPSBuIHx8IDE7XG4gIGNvbnN0IG5ic3BzID0gXy50aW1lcyhueCwgXy5jb25zdGFudChcIlxcdTAwQTBcIikpO1xuICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXy5qb2luKG5ic3BzLCBcIlwiKSk7XG59XG5cbmNsYXNzIEpRTm9kZUN0b3JzIHtcbiAgbmJzcCA9IG1rTmJzcDtcbiAgLyogdHNsaW50OmRpc2FibGU6IG1lbWJlci1hY2Nlc3MgKi9cbiAgYSA9IG5vZGVDdHIoXCJhXCIpO1xuICBhYmJyID0gbm9kZUN0cihcImFiYnJcIik7XG4gIGFjcm9ueW0gPSBub2RlQ3RyKFwiYWNyb255bVwiKTtcbiAgYWRkcmVzcyA9IG5vZGVDdHIoXCJhZGRyZXNzXCIpO1xuICBhcHBsZXQgPSBub2RlQ3RyKFwiYXBwbGV0XCIpO1xuICBhcmVhID0gbm9kZUN0cihcImFyZWFcIik7XG4gIGFydGljbGUgPSBub2RlQ3RyKFwiYXJ0aWNsZVwiKTtcbiAgYXNpZGUgPSBub2RlQ3RyKFwiYXNpZGVcIik7XG4gIGF1ZGlvID0gbm9kZUN0cihcImF1ZGlvXCIpO1xuICBiID0gbm9kZUN0cihcImJcIik7XG4gIGJhc2UgPSBub2RlQ3RyKFwiYmFzZVwiKTtcbiAgYmFzZWZvbnQgPSBub2RlQ3RyKFwiYmFzZWZvbnRcIik7XG4gIGJkaSA9IG5vZGVDdHIoXCJiZGlcIik7XG4gIGJkbyA9IG5vZGVDdHIoXCJiZG9cIik7XG4gIGJpZyA9IG5vZGVDdHIoXCJiaWdcIik7XG4gIGJsb2NrcXVvdGUgPSBub2RlQ3RyKFwiYmxvY2txdW90ZVwiKTtcbiAgYm9keSA9IG5vZGVDdHIoXCJib2R5XCIpO1xuICBiciA9IG5vZGVDdHIoXCJiclwiKTtcbiAgYnV0dG9uID0gbm9kZUN0cihcImJ1dHRvblwiKTtcbiAgY2FudmFzID0gbm9kZUN0cihcImNhbnZhc1wiKTtcbiAgY2FwdGlvbiA9IG5vZGVDdHIoXCJjYXB0aW9uXCIpO1xuICBjZW50ZXIgPSBub2RlQ3RyKFwiY2VudGVyXCIpO1xuICBjaXRlID0gbm9kZUN0cihcImNpdGVcIik7XG4gIGNvZGUgPSBub2RlQ3RyKFwiY29kZVwiKTtcbiAgY29sID0gbm9kZUN0cihcImNvbFwiKTtcbiAgY29sZ3JvdXAgPSBub2RlQ3RyKFwiY29sZ3JvdXBcIik7XG4gIGRhdGEgPSBub2RlQ3RyKFwiZGF0YVwiKTtcbiAgZGF0YWxpc3QgPSBub2RlQ3RyKFwiZGF0YWxpc3RcIik7XG4gIGRkID0gbm9kZUN0cihcImRkXCIpO1xuICBkZWwgPSBub2RlQ3RyKFwiZGVsXCIpO1xuICBkZXRhaWxzID0gbm9kZUN0cihcImRldGFpbHNcIik7XG4gIGRmbiA9IG5vZGVDdHIoXCJkZm5cIik7XG4gIGRpYWxvZyA9IG5vZGVDdHIoXCJkaWFsb2dcIik7XG4gIGRpciA9IG5vZGVDdHIoXCJkaXJcIik7XG4gIGRpdiA9IG5vZGVDdHIoXCJkaXZcIik7XG4gIGRsID0gbm9kZUN0cihcImRsXCIpO1xuICBkdCA9IG5vZGVDdHIoXCJkdFwiKTtcbiAgZW0gPSBub2RlQ3RyKFwiZW1cIik7XG4gIGVtYmVkID0gbm9kZUN0cihcImVtYmVkXCIpO1xuICBmaWVsZHNldCA9IG5vZGVDdHIoXCJmaWVsZHNldFwiKTtcbiAgZmlnY2FwdGlvbiA9IG5vZGVDdHIoXCJmaWdjYXB0aW9uXCIpO1xuICBmaWd1cmUgPSBub2RlQ3RyKFwiZmlndXJlXCIpO1xuICBmb250ID0gbm9kZUN0cihcImZvbnRcIik7XG4gIGZvb3RlciA9IG5vZGVDdHIoXCJmb290ZXJcIik7XG4gIGZvcm0gPSBub2RlQ3RyKFwiZm9ybVwiKTtcbiAgZnJhbWUgPSBub2RlQ3RyKFwiZnJhbWVcIik7XG4gIGZyYW1lc2V0ID0gbm9kZUN0cihcImZyYW1lc2V0XCIpO1xuICBoMSA9IG5vZGVDdHIoXCJoMVwiKTtcbiAgaDIgPSBub2RlQ3RyKFwiaDJcIik7XG4gIGgzID0gbm9kZUN0cihcImgzXCIpO1xuICBoNCA9IG5vZGVDdHIoXCJoNFwiKTtcbiAgaDUgPSBub2RlQ3RyKFwiaDVcIik7XG4gIGg2ID0gbm9kZUN0cihcImg2XCIpO1xuICBoZWFkID0gbm9kZUN0cihcImhlYWRcIik7XG4gIGhlYWRlciA9IG5vZGVDdHIoXCJoZWFkZXJcIik7XG4gIGhyID0gbm9kZUN0cihcImhyXCIpO1xuICBodG1sID0gbm9kZUN0cihcImh0bWxcIik7XG4gIGkgPSBub2RlQ3RyKFwiaVwiKTtcbiAgaWZyYW1lID0gbm9kZUN0cihcImlmcmFtZVwiKTtcbiAgaW1nID0gbm9kZUN0cihcImltZ1wiKTtcbiAgaW5wdXQgPSBub2RlQ3RyKFwiaW5wdXRcIik7XG4gIGlucyA9IG5vZGVDdHIoXCJpbnNcIik7XG4gIGtiZCA9IG5vZGVDdHIoXCJrYmRcIik7XG4gIGxhYmVsID0gbm9kZUN0cihcImxhYmVsXCIpO1xuICBsZWdlbmQgPSBub2RlQ3RyKFwibGVnZW5kXCIpO1xuICBsaSA9IG5vZGVDdHIoXCJsaVwiKTtcbiAgbGluayA9IG5vZGVDdHIoXCJsaW5rXCIpO1xuICBtYWluID0gbm9kZUN0cihcIm1haW5cIik7XG4gIG1hcCA9IG5vZGVDdHIoXCJtYXBcIik7XG4gIG1hcmsgPSBub2RlQ3RyKFwibWFya1wiKTtcbiAgbWVudSA9IG5vZGVDdHIoXCJtZW51XCIpO1xuICBtZW51aXRlbSA9IG5vZGVDdHIoXCJtZW51aXRlbVwiKTtcbiAgbWV0YSA9IG5vZGVDdHIoXCJtZXRhXCIpO1xuICBtZXRlciA9IG5vZGVDdHIoXCJtZXRlclwiKTtcbiAgbmF2ID0gbm9kZUN0cihcIm5hdlwiKTtcbiAgbm9mcmFtZXMgPSBub2RlQ3RyKFwibm9mcmFtZXNcIik7XG4gIG5vc2NyaXB0ID0gbm9kZUN0cihcIm5vc2NyaXB0XCIpO1xuICAvLyBvYmplY3QgID0gbm9kZUN0cihcIi8vIG9iamVjdFwiKTtcbiAgb2wgPSBub2RlQ3RyKFwib2xcIik7XG4gIG9wdGdyb3VwID0gbm9kZUN0cihcIm9wdGdyb3VwXCIpO1xuICBvcHRpb24gPSBub2RlQ3RyKFwib3B0aW9uXCIpO1xuICBvdXRwdXQgPSBub2RlQ3RyKFwib3V0cHV0XCIpO1xuICBwID0gbm9kZUN0cihcInBcIik7XG4gIHBhcmFtID0gbm9kZUN0cihcInBhcmFtXCIpO1xuICBwaWN0dXJlID0gbm9kZUN0cihcInBpY3R1cmVcIik7XG4gIHByZSA9IG5vZGVDdHIoXCJwcmVcIik7XG4gIHByb2dyZXNzID0gbm9kZUN0cihcInByb2dyZXNzXCIpO1xuICBxID0gbm9kZUN0cihcInFcIik7XG4gIHJwID0gbm9kZUN0cihcInJwXCIpO1xuICBydCA9IG5vZGVDdHIoXCJydFwiKTtcbiAgcnVieSA9IG5vZGVDdHIoXCJydWJ5XCIpO1xuICBzID0gbm9kZUN0cihcInNcIik7XG4gIHNhbXAgPSBub2RlQ3RyKFwic2FtcFwiKTtcbiAgc2NyaXB0ID0gbm9kZUN0cihcInNjcmlwdFwiKTtcbiAgc2VjdGlvbiA9IG5vZGVDdHIoXCJzZWN0aW9uXCIpO1xuICBzZWxlY3QgPSBub2RlQ3RyKFwic2VsZWN0XCIpO1xuICBzbWFsbCA9IG5vZGVDdHIoXCJzbWFsbFwiKTtcbiAgc291cmNlID0gbm9kZUN0cihcInNvdXJjZVwiKTtcbiAgc3BhbiA9IG5vZGVDdHIoXCJzcGFuXCIpO1xuICBzdHJpa2UgPSBub2RlQ3RyKFwic3RyaWtlXCIpO1xuICBzdHJvbmcgPSBub2RlQ3RyKFwic3Ryb25nXCIpO1xuICBzdHlsZSA9IG5vZGVDdHIoXCJzdHlsZVwiKTtcbiAgc3ViID0gbm9kZUN0cihcInN1YlwiKTtcbiAgc3VtbWFyeSA9IG5vZGVDdHIoXCJzdW1tYXJ5XCIpO1xuICBzdXAgPSBub2RlQ3RyKFwic3VwXCIpO1xuICB0YWJsZSA9IG5vZGVDdHIoXCJ0YWJsZVwiKTtcbiAgdGJvZHkgPSBub2RlQ3RyKFwidGJvZHlcIik7XG4gIHRkID0gbm9kZUN0cihcInRkXCIpO1xuICB0ZXh0YXJlYSA9IG5vZGVDdHIoXCJ0ZXh0YXJlYVwiKTtcbiAgdGZvb3QgPSBub2RlQ3RyKFwidGZvb3RcIik7XG4gIHRoID0gbm9kZUN0cihcInRoXCIpO1xuICB0aGVhZCA9IG5vZGVDdHIoXCJ0aGVhZFwiKTtcbiAgdGltZSA9IG5vZGVDdHIoXCJ0aW1lXCIpO1xuICB0aXRsZSA9IG5vZGVDdHIoXCJ0aXRsZVwiKTtcbiAgdHIgPSBub2RlQ3RyKFwidHJcIik7XG4gIHRyYWNrID0gbm9kZUN0cihcInRyYWNrXCIpO1xuICB0dCA9IG5vZGVDdHIoXCJ0dFwiKTtcbiAgdSA9IG5vZGVDdHIoXCJ1XCIpO1xuICB1bCA9IG5vZGVDdHIoXCJ1bFwiKTtcbiAgLy8gdmFyICAgICA9IG5vZGVDdHIoXCJ2YXJcIik7XG4gIHZpZGVvID0gbm9kZUN0cihcInZpZGVvXCIpO1xuICB3YnIgPSBub2RlQ3RyKFwid2JyXCIpO1xufVxuXG5leHBvcnQgY29uc3QgdDogSlFOb2RlQ3RvcnMgPSBuZXcgSlFOb2RlQ3RvcnMoKTtcblxuY29uc3QgaSA9ICguLi5hcmdzOiBKUUFyZ3NbXSkgPT4gZWxlbShcImlcIiwgLi4uYXJncyk7XG5cbmNvbnN0IGZhID0gKGljbjogc3RyaW5nKSA9PiBpKFwiLmZhXCIsIGAuZmEtJHtpY259YCwge1wiYXJpYS1oaWRkZW5cIjogdHJ1ZX0pO1xuXG5leHBvcnQgY29uc3QgaWNvbiA9IHtcbiAgZmEsXG4gIHRyYXNoOiBmYShcInRyYXNoXCIpLFxuICBoYXNodGFnOiBmYShcImhhc2h0YWdcIiksXG4gIGNoZXZyb25SaWdodDogZmEoXCJjaGV2cm9uLXJpZ2h0XCIpLFxuICBjaGV2cm9uTGVmdDogZmEoXCJjaGV2cm9uLWxlZnRcIiksXG59O1xuXG5mdW5jdGlvbiBub2RlQ3RyKHRhZzogc3RyaW5nKTogKC4uLmFyZ3M6IEpRQXJnc1tdKSA9PiBKUXVlcnk8SFRNTEVsZW1lbnQ+IHtcbiAgcmV0dXJuICguLi5hcmdzKSA9PiBlbGVtKHRhZywgLi4uYXJncyk7XG59XG5mdW5jdGlvbiBlbGVtKHRhZzogc3RyaW5nLCAuLi5hcmdzOiBKUUFyZ3NbXSk6IEpRdWVyeTxIVE1MRWxlbWVudD4ge1xuICBjb25zdCAkdGFnID0gJChgPCR7dGFnfT48LyR7dGFnfT5gKTtcbiAgXy5lYWNoKGFyZ3MsIGFyZyA9PiB7XG4gICAgaWYgKHR5cGVvZiBhcmcgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGNvbnN0IHJlID0gL15bXFxcXC4jOkA9XS87XG4gICAgICBpZiAocmUudGVzdChhcmcpKSB7XG4gICAgICAgIGFyZy5zcGxpdCgvICsvKS5mb3JFYWNoKGF0dHIgPT4ge1xuICAgICAgICAgIGlmIChfLnN0YXJ0c1dpdGgoYXR0ciwgXCIuXCIpKSB7XG4gICAgICAgICAgICAkdGFnLmFkZENsYXNzKGF0dHIuc2xpY2UoMSkpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoXy5zdGFydHNXaXRoKGF0dHIsIFwiI1wiKSkge1xuICAgICAgICAgICAgJHRhZy5hdHRyKFwiaWRcIiwgYXR0ci5zbGljZSgxKSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChfLnN0YXJ0c1dpdGgoYXR0ciwgXCI6XCIpKSB7XG4gICAgICAgICAgICAkdGFnLmF0dHIoXCJ0eXBlXCIsIGF0dHIuc2xpY2UoMSkpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoXy5zdGFydHNXaXRoKGF0dHIsIFwiQFwiKSkge1xuICAgICAgICAgICAgJHRhZy5hdHRyKFwibmFtZVwiLCBhdHRyLnNsaWNlKDEpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKF8uc3RhcnRzV2l0aChhdHRyLCBcIj1cIikpIHtcbiAgICAgICAgICAgICR0YWcuYXR0cihcInZhbHVlXCIsIGF0dHIuc2xpY2UoMSkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHVuZXhwZWN0ZWQgYXR0cmlidXRlIHR5cGU6ICR7YXR0cn1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHRhZy50ZXh0KGFyZyk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgYXJnID09PSBcIm9iamVjdFwiKSB7XG4gICAgICBpZiAoYXJnIGluc3RhbmNlb2YgJCkge1xuICAgICAgICAkdGFnLmFwcGVuZChhcmcgYXMgSlF1ZXJ5KTtcbiAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG4gICAgICAgIF8uZWFjaChhcmcsIGEwID0+IHtcbiAgICAgICAgICAkdGFnLmFwcGVuZChhMCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgXy5lYWNoKF8udG9QYWlycyhhcmcpLCAoW2ssIHZdKSA9PiB7XG4gICAgICAgICAgJHRhZy5hdHRyKGssIHYpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGB1bmV4cGVjdGVkIGVsZW0gaW5pdGlhbGl6ZXI6ICR7YXJnfWApO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuICR0YWc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlTW9kYWwoZm9ybTogSlF1ZXJ5PEhUTUxFbGVtZW50Pikge1xuICBjb25zdCBtb2RhbCA9IHQuZGl2KFxuICAgIFwiLm1vZGFsXCIsXG4gICAgXCIuZmFkZVwiLFxuICAgIHtcbiAgICAgIHRhYmluZGV4OiBcIi0xXCIsXG4gICAgICByb2xlOiBcImRpYWxvZ1wiLFxuICAgICAgXCJhcmlhLWhpZGRlblwiOiB0cnVlLFxuICAgIH0sXG4gICAgW1xuICAgICAgdC5kaXYoXCIubW9kYWwtZGlhbG9nXCIsIHtyb2xlOiBcImRvY3VtZW50XCJ9LCBbXG4gICAgICAgIHQuZGl2KFwiLm1vZGFsLWNvbnRlbnRcIiwgW3QuZGl2KFwiLm1vZGFsLWJvZHlcIiwgW2Zvcm1dKV0pLFxuICAgICAgXSksXG4gICAgXSxcbiAgKTtcblxuICByZXR1cm4gbW9kYWw7XG59XG5cbmV4cG9ydCBjb25zdCBodG0gPSB7XG4gIGxhYmVsZWRUZXh0SW5wdXQ6IChsYWJlbDogc3RyaW5nLCBrZXk6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiB0LnNwYW4oW1xuICAgICAgdC5pbnB1dChcIjp0ZXh0XCIsIGBAJHtrZXl9YCwgYCMke2tleX1gKSxcbiAgICAgIHQubGFiZWwoe2ZvcjogYCRrZXlgfSwgbGFiZWwpLFxuICAgIF0pO1xuICB9LFxuXG4gIGxhYmVsZWRUZXh0Ym94SW5wdXQ6IChsYWJlbDogc3RyaW5nLCBrZXk6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiB0LnNwYW4oW1xuICAgICAgdC50ZXh0YXJlYShcIjp0ZXh0YXJlYVwiLCBgQCR7a2V5fWAsIGAjJHtrZXl9YCksXG4gICAgICB0LmxhYmVsKHtmb3I6IGAka2V5YH0sIGxhYmVsKSxcbiAgICBdKTtcbiAgfSxcblxuICBsYWJlbGVkRmlsZUlucHV0OiAobGFiZWw6IHN0cmluZywga2V5OiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gdC5kaXYoW1xuICAgICAgdC5pbnB1dChcIjpmaWxlXCIsIGBAJHtrZXl9YCwgYCMke2tleX1gKSxcbiAgICAgIHQubGFiZWwoe2ZvcjogYCRrZXlgfSwgbGFiZWwpLFxuICAgIF0pO1xuICB9LFxuXG4gIGljb25CdXR0b246IChpY29uTmFtZTogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIHQuYnV0dG9uKFwiLmJ0bi1pY29uXCIsIFtpY29uLmZhKGljb25OYW1lKV0pO1xuICB9LFxuXG4gIG1ha2VSYWRpb3MobmFtZTogc3RyaW5nLCB2YWx1ZXM6IGFueVtdKSB7XG4gICAgY29uc3QgcmFkaW9zID0gXy5mbGF0TWFwKFxuICAgICAgemlwV2l0aEluZGV4KHZhbHVlcyksXG4gICAgICAoW1t2YWwsIHZpY29uLCBpbml0Q2hlY2ssIHRvb2x0aXAsIGNhbGxiYWNrXSwgdmldKSA9PiB7XG4gICAgICAgIGNvbnN0IGlkID0gYCR7bmFtZX0tY2hvaWNlLSR7dml9YDtcbiAgICAgICAgY29uc3QgYnRuID0gdC5pbnB1dCh7XG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICBpZCxcbiAgICAgICAgICB0eXBlOiBcInJhZGlvXCIsXG4gICAgICAgICAgdmFsdWU6IHZhbCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGluaXRDaGVjaykge1xuICAgICAgICAgICQoYnRuKS5hdHRyKFwiY2hlY2tlZFwiLCBpbml0Q2hlY2spO1xuICAgICAgICAgICQoYnRuKS5wcm9wKFwiY2hlY2tlZFwiLCBpbml0Q2hlY2spO1xuICAgICAgICB9XG5cbiAgICAgICAgJChidG4pLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiY2hhbmdpbmcgdG9vbHNldFwiLCBjYWxsYmFjayk7XG4gICAgICAgICAgaWYgKCQodGhpcykuaXMoXCI6Y2hlY2tlZFwiKSkge1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGxhYmVsID0gdC5sYWJlbChcbiAgICAgICAgICB7XG4gICAgICAgICAgICBmb3I6IGlkLFxuICAgICAgICAgICAgdGl0bGU6IHRvb2x0aXAsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBbaWNvbi5mYSh2aWNvbildLFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiBbYnRuLCBsYWJlbF07XG4gICAgICB9LFxuICAgICk7XG4gICAgY29uc3QgZm9ybSA9IHQuZm9ybShcIi5pbmxpbmVcIiwgW3Quc3BhbihcIi5yYWRpby1zd2l0Y2hcIiwgW3JhZGlvc10pXSk7XG4gICAgcmV0dXJuIGZvcm07XG4gIH0sXG5cbiAgbWFrZVRvZ2dsZShcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgY2hlY2tlZEljb246IHN0cmluZyxcbiAgICB1bmNoZWNrZWRJY29uOiBzdHJpbmcsXG4gICAgaW5pdENoZWNrOiBib29sZWFuLFxuICAgIHRvb2x0aXA6IHN0cmluZyxcbiAgKSB7XG4gICAgY29uc3QgaWQgPSBcIm15LXRvZ2dsZVwiO1xuICAgIGNvbnN0IGlucHV0ID0gdC5pbnB1dCh7XG4gICAgICBuYW1lLFxuICAgICAgaWQsXG4gICAgICB0eXBlOiBcImNoZWNrYm94XCIsXG4gICAgfSk7XG5cbiAgICBpZiAoaW5pdENoZWNrKSB7XG4gICAgICAkKGlucHV0KS5hdHRyKFwiY2hlY2tlZFwiLCBpbml0Q2hlY2sudG9TdHJpbmcoKSk7XG4gICAgICAkKGlucHV0KS5wcm9wKFwiY2hlY2tlZFwiLCBpbml0Q2hlY2sudG9TdHJpbmcoKSk7XG4gICAgfVxuXG4gICAgY29uc3QgbGFiZWxPbiA9IHQubGFiZWwoXG4gICAgICBcIi5jaGVja2VkXCIsXG4gICAgICB7XG4gICAgICAgIGZvcjogaWQsXG4gICAgICAgIHRpdGxlOiB0b29sdGlwLFxuICAgICAgfSxcbiAgICAgIFtpY29uLmZhKGNoZWNrZWRJY29uKV0sXG4gICAgKTtcblxuICAgIGNvbnN0IGxhYmVsT2ZmID0gdC5sYWJlbChcbiAgICAgIFwiLnVuY2hlY2tlZFwiLFxuICAgICAge1xuICAgICAgICBmb3I6IGlkLFxuICAgICAgICB0aXRsZTogdG9vbHRpcCxcbiAgICAgIH0sXG4gICAgICBbaWNvbi5mYSh1bmNoZWNrZWRJY29uKV0sXG4gICAgKTtcblxuICAgIGNvbnN0IGZvcm0gPSB0LmZvcm0oXCIuaW5saW5lXCIsIFtcbiAgICAgIHQuc3BhbihcIi50b2dnbGUtc3dpdGNoXCIsIFtpbnB1dCwgbGFiZWxPbiwgbGFiZWxPZmZdKSxcbiAgICBdKTtcbiAgICByZXR1cm4gZm9ybTtcbiAgfSxcbn07XG4iXX0=